<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title></title>
  <link href="../../../global/styles/reset.css" rel="stylesheet" type="text/css" />
  <script src="../../../amdquery/amdquery.js" type="text/javascript" amdquery="define:$;" amd="detectCR:1;" module="compatibleEvent:1;testLogByHTML:1"></script>

  <script type="text/javascript">
    $.require(["main/query", "main/data", "module/Test"], function( query, utilData, Test ) {
      var testCustomEvent = new Test("data", function(preResult){
        // complete
      }).describe("Test utilData function", function(preResult, expect, logger){
        var divTest = $( "#test" )[0];

        expect(utilData.hasData( divTest ), "Div test has data").to.equal(false);

        expect(function(){
          utilData.set( divTest, "name", "Amanda" );
        }, "Set div test name with 'Amanda'").not.to.Throw();

        expect(utilData.hasData( divTest ), "Div test has data").to.equal(true);

        expect(utilData.get( divTest, "name" ), "Data get name").to.equal("Amanda");

        expect(function(){
          utilData.set( divTest, "age", 19 );
        }, "Set div test age with 19").not.to.Throw();

        expect(utilData.get( divTest ), "Get data").to.equal({ name: "Amanda", age: 19 });

        expect(function(){
          utilData.removeData( divTest, "age" );
        }).not.to.Throw();

        expect(utilData.get( divTest, "age" ), "Get age").not.to.exists();

        expect(function(){
          utilData.removeData( divTest );
        }).not.to.Throw();

        expect(utilData.hasData( divTest ), "Div test has data").to.equal(false);

      }).start();

    });
  </script>
</head>

<body style="overflow: auto">
  <div id="test"></div>
</body>

</html>
